<!doctype html>
<html>
  <head>
    <title>Static</title>
    <script type="text/javascript" src="../src/barcode.js"></script>
    <script type="text/javascript" src="../src/ean13.js"></script>
    <script type="text/javascript" src="../src/reader.js"></script>
    <script type="text/javascript" src="../src/reader/processor.js"></script>
    <script type="text/javascript" src="../src/reader/detector.js"></script>

  </head>
  <body style="background: ">
  </body>

  <script type="text/javascript">
    var tests = {
      'ean13': [
        'hqdefault.jpg',                                        // PASS
        '2923038275_ae205c7e31.jpg',                            // PASS
        '2923038275_ae205c7e31_ideal.png',                      // PASS
        '11949849541036280448barcode_ean13_svg_hi.png',         // PASS
        'barcode_ean13.jpg',                                    // PASS
        'codigo-de-barras-300x240.jpg', //cow                   // PASS
        'EAN13Barcode.jpg',                                     // PASS
        'ean13barcode_header.jpg',                              // PASS
        'barcode_sample.jpg',                                   // PASS
        'tesco_dishcloths.jpg',                                 // PASS
        'wineforspice.barcode.rani-gold.IMGP1544.JPG'           // PASS (pretty lucky on this one)
        // 'EAN13.jpg',                                            // X (gets the first 3 numbers and then fails on the "2")
        // '220px-ISBNetEAN.jpg',                                  // X (poor quality/resolution)
        // 'ean13_barcode_label.jpg',                              // X (did decently, but probably too poor of quality))
        // 'greetings-barcodes-700.jpg',                           // X (failed to find the start sequence because the bars are really thin)
        // 'EAN-13-Barcode-Labels-103731_image.jpg',               // X (not even reading the right spot)
        // '8585363481_9baab0f413_z.jpg',                          // X (couldn't find start sequence; bars threshold too thin)
        // 'ean-13-scnr.jpg',                                      // X (couldn't find start sequence; bars threshold too thin)
        // 'ean-13-slid-1.jpg',                                    // X (bounds detection)
        // 'Light margin 1.jpg',                                   // X (quality/thresholding?)
      ]
    };

    for(var i = 0; i < tests.ean13.length; i++) {
      (function(i) {
        var div = document.createElement('div');
        var canvas = document.createElement('canvas');
        div.appendChild(canvas);

        document.querySelector('body').appendChild(div);

        var barcode_reader = new barcode.reader({
          'source': canvas,
          'symbology': 'ean13'
        });

        div.appendChild(barcode_reader.get_canvas());

        var context = canvas.getContext('2d');
        var image = new Image();
        image.src = 'img/ean13/' + tests.ean13[i];
        image.onload = function() {
          canvas.width = image.width;
          canvas.height = image.height;

          context.drawImage(image, 0, 0);



          barcode_reader.start();


        };
      })(i);
    }





  </script>

</html>
